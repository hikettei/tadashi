#+startup: beamer
#+latex_header: \usepackage{tikz}
#+latex_header: \usetikzlibrary{graphs,quotes,graphdrawing,arrows.meta}
#+latex_compiler: lualatex
#+latex_header: \usegdlibrary{trees}
#+latex_header: \tikzset{trafo/.style={line width=6pt, arrows = {-Latex[length=0pt 3 0]}}}

* Mark subtree
#+begin_export latex
\begin{tikzpicture}
  \graph [grow down, tree layout, nodes={rounded corners, rectangle, draw}] {
    "\texttt{{band\_node}}" -- {
      "",
      "",
      band/"\texttt{band\_node}" -- { "", "" }
    }
  };
  \draw[red, dashed, thick] (band) +(-1.5cm,-0.8cm) arc (180:0:1.5cm);
  \scoped [xshift=6cm]
  \graph [grow down, tree layout, nodes={rounded corners, rectangle, draw}] {
    "\texttt{{band\_node}}" -- {
      "",
      "",
      "\texttt{mark:{"parallel"}}"[red] -- {
        "\texttt{band\_node}" [>red] -- { "", "" }
      }
    }
  };
  \path (3,1) node{Generate (edit) yaml file};
  \draw [red, trafo] (3, -1) -- +(1, 0);

\end{tikzpicture}
#+end_export

* Generating the AST

#+begin_export latex
\begin{tikzpicture}
  \graph [grow down, tree layout, nodes={rounded corners, rectangle, draw}] {
    "\texttt{{band\_node}}" -- {
      "",
      "",
      "\texttt{mark:{"parallel"}}"[red] -- {
        "\texttt{band\_node}" [>red] -- { "", "" }
      }
    }
  };
  \path (3,1) node[teal]{isl\_ast\_build\_node\_from\_schedule(build, schedule)};
  \draw [teal, trafo] (3, -1.5) -- +(1, 0);
  \scoped [purple, xshift=6cm]
  \graph [grow down, tree layout, nodes={rounded corners, rectangle, draw}] {
    "\texttt{{for\_node}}" -- {
      "",
      "",
      "\texttt{mark:{"parallel"}}"[red] -- {
        "\texttt{for\_node}" [>red] -- { "", "" }
      }
    }
  };
\end{tikzpicture}
#+end_export
